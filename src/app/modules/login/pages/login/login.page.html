<main class="main">
  <form [formGroup]="loginForm" class="form">
    <div class="form__block">
      <label for="email">Email</label>
      <input
        class="form__input"
        type="email"
        id="email"
        formControlName="email"
        [ngClass]="{ 'form__input--error': loginForm.get('email')?.invalid && loginForm.get('email')?.touched }" />
      @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
      @if (loginForm.get('email')?.errors?.['required']) {
      <small class="form__error">Email je obvezno polje</small>
      } @if (loginForm.get('email')?.errors?.['email']) {
      <small class="form__error">Email ni pravilno vpisan</small>
      } }
    </div>
    <div class="form__block">
      <label for="password">Geslo</label>
      <input
        class="form__input"
        type="password"
        id="password"
        formControlName="password"
        [ngClass]="{ 'form__input--error': loginForm.get('password')?.invalid && loginForm.get('password')?.touched }" />
      @if (loginForm.get('password')?.invalid &&
      loginForm.get('password')?.touched ) {
      @if(loginForm.get('password')?.errors?.['required']) {
      <small class="form__error">Geslo je obvezno polje</small>
      } @if(loginForm.get('password')?.errors?.['pattern']) {
      <small class="form__error">
        Geslo mora imeti vsaj 8 znakov, eno veliko črko in eno številko
      </small>
      } }
    </div>
    <button
      type="submit"
      class="form__button button--primary"
      (click)="login()">
      Prijava
    </button>
    <div class="form__errorBlock" *ngIf="showError$ | async as error">
      {{ error.message }}
    </div>
  </form>
  <span>
    Še nimate računa? <a routerLink="/register">Registrirajte se</a>
  </span>
</main>
